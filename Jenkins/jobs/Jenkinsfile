import groovy.json.JsonSlurperClassic

def jsonParse(def json){
    new groovy.json.JsonSlurperClassic().parseText(json)
}

pipeline {
    agent any

    environment {
        SERVER_A = "64.23.151.32" //HappyCell
        SERVER_B = "200.25.39.74" //Servidor - Soporte
    }

    stages {
        stage('Transferencia entre Servidores') {
            steps {
                // Conexión a Servidor A
                sshagent(['openbravo1']) {
                    script {
                        echo "Copiando archivo desde Servidor A al Servidor B"
                        // Ruta origen en Servidor A
                        def fileA = "/srv/logsopenbravo/openbravo_20250826_1300.log"
                        // Ruta destino en Servidor B
                        def destB = "ubuntu@${SERVER_B}:/home/ubuntu/Temp/"

                        sh "scp -o StrictHostKeyChecking=no ${fileA} ${destB}"
                    }
                }
/*
                // Conexión a Servidor B
                sshagent(['ClaveServidorB']) {
                    script {
                        echo "Copiando archivo desde Servidor B al Servidor A"
                        // Ruta origen en Servidor B
                        def fileB = "/ruta/origen/archivoB.txt"
                        // Ruta destino en Servidor A
                        def destA = "usuarioA@${SERVER_A}:/ruta/destino/"

                        sh "scp -o StrictHostKeyChecking=no ${fileB} ${destA}"
                    }
                }
*/
            }
        }
    }
}



